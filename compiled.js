var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var d=$jscomp.propertyToPolyfillSymbol[b];if(null==d)return a[b];d=a[d];return void 0!==d?d:a[b]};
$jscomp.polyfill=function(a,b,d,e){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,d,e):$jscomp.polyfillUnisolated(a,b,d,e))};$jscomp.polyfillUnisolated=function(a,b,d,e){d=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var g=a[e];if(!(g in d))return;d=d[g]}a=a[a.length-1];e=d[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,d,e){var g=a.split(".");a=1===g.length;e=g[0];e=!a&&e in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var h=0;h<g.length-1;h++){var l=g[h];if(!(l in e))return;e=e[l]}g=g[g.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?e[g]:null;b=b(d);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,g,{configurable:!0,writable:!0,value:b}):b!==d&&($jscomp.propertyToPolyfillSymbol[g]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(g):$jscomp.POLYFILL_PREFIX+g,g=
$jscomp.propertyToPolyfillSymbol[g],$jscomp.defineProperty(e,g,{configurable:!0,writable:!0,value:b})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var d=0,e=function(a){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(a||"")+"_"+d++,a)};return e},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),d=0;d<b.length;d++){var e=$jscomp.global[b[d]];"function"===typeof e&&"function"!=typeof e.prototype[a]&&$jscomp.defineProperty(e.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var d=0,e={next:function(){if(d<a.length){var g=d++;return{value:b(g,a[g]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,d){return d})}},"es8","es3");
var _tileData={Golem:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAIVBMVEX///+tra0AAABkZGQvLy8v\nLy+tra3///9kZGQAAADuNiRzKst8AAAABXRSTlMAAAAAAMJrBrEAAACsSURBVHheVc4xbsMwDAVQ\nQZtHoZM3I5u3Ap28uYdwKh/AtHSA6AYSws12GoG/N+gtwzRTORBv+R/f/D8LdH9wrl3T7tyLwIuq\n3x+1sq1cgsRdM5Wiz/o60/iVAEp506ZciILHaKxgunxN4NE0Bct9PiNspomgEgj1yUNC4f7JeggR\n91G54uzzgqQscY01VY1Z4ev3cBV+N3aQvLeeb8o3mT/dnT90/QkYLXAyD9FnRD3tSfNrAAAAAElF\nTkSuQmCC",Goo:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAGFBMVEX///8AAAAvLy8vLy8AAAD+\n7gD///9kZGRpR8KUAAAAA3RSTlMAAAD6dsTeAAAAbElEQVR4Xo3OwQ0CMRBD0RxoYNA0QEQHY3Ef\n7EADoQREA2jrJwtZiQsS/+J3dPmnnfINM2cgzWyQEDEp6UOHFMyNpyc2Xh/MQd775bYAK1tvnWAW\nh9Y4SM3wmwGJoeIRYwOqZS/Vo3Suh6/bLz/9IF6y4rHyAAAAAElFTkSuQmCC",
MPBoost:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEX///////8AAAAjetytra0V\nN15kZGTiuZuIAAAAAXRSTlMAQObYZgAAAF1JREFUeF51z8EJgDAMhWFxg2fwrkW8h5AFxAUkuED3\nH8I0WkGkPzl8pwfpGvUpmpwrouycccJvKBzl8AuSqAkHIR5uEhP/aWpaF7y6wPQuAHWhFFz2aPsy\nPTV+uADVOBMQxI2WCwAAAABJRU5ErkJggg==",Dirt_industrial:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUAgMAAADw5/WeAAAACVBMVEVkZGStra0vLy+xXGP5AAAA\nIUlEQVR4Xq3KMQ0AMAgAsLLsQBbSkI4DLnpXhU8/aXc7B7EYAm7Pt5TRAAAAAElFTkSuQmCC",G_Heal:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAElBMVEUAAABVgAAvLy8AAADtEhIv\nLy/f55x/AAAAA3RSTlMAAAD6dsTeAAAAb0lEQVR4XlWNwQnDQAwE15j8pYf/SQcGSRWcK7Bw/61k\nSDDm5jUMqzu5bxec7jJ1QL0X2QuBE+3I4xhRH20RGTHIajQHWpOyzMEaTTLxp2TirM/gOZseq1tb\na/8/rl3kZEmUkYEoU13QWuS2BuzyLx1AKZEILjWBAAAAAElFTkSuQmCC",
MeatMan:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAIVBMVEX///8AAABBDQjuNiSCHBLu\nNiRBDQj///8AAACCHBL/eDzO1cEJAAAABXRSTlMAAAAAAMJrBrEAAACISURBVHheVc8xDoJAEIXh\nR2woJbGgxRNwDC8wCVwA9wRLi8ZNBnrD7AGMCad0ZlkT/TPFV7xm8NuBU5Oy3KyXtMBievfGQFaU\n4z+7QJxYZnKLJXO7IeQtiXL1q39KImthZzdeHRnnfSvRoZ5N/cB3nDhaw+OMouZUUwHVJTq9BkDB\nJHoTtO8XH66VTjHTI7crAAAAAElFTkSuQmCC",G_Reveal:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEUAAABVgAAvLy8jetz///8v\nLy8AAACN7bVFAAAAA3RSTlMAAAD6dsTeAAAAeUlEQVR4Xl3OMQrDMAyF4ZehmaUhe3sGG1/AJgcI\nxHNAse9/hL6kMoX8k/gMkqG67GxThaB21t4T5NXvNo7Emz9Yek+WjAyiWUpk+LuPZ46ra4mh/PQs\nIZTVNUdXMvGx4b+3jWsV8/jDATIjAkJ2FLSdVUxQmS89oF/rej6f0cAyoQAAAABJRU5ErkJggg==",
HeroWarrior:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAMFBMVEX///8AAACtra1kZGQvLy//\n////0bzplX+tra0jetxkZGRZp//uNiQAAAAvLy8VN15rnW+hAAAABXRSTlMAAAAAAMJrBrEAAADH\nSURBVHheHcyxasMwFAXQmw8QOKWrhmTvkI8JJINXb501ecyQgsdAHkV47x90yCcU9AKqI7sP7fkD\nDSKVc3k8Dne4UBWgGADDM5Svy6vhawmnvRVf47bd06nctoM+EJ2PRLsrXm59IupTt8bizcbHIwe3\nArR9F/kN13k0NyXRPdk2zfDkQlpjBlnOrR2MaQMXhkv++4mTnRnT92efpVDHSJTHLwa8tSJh/GCo\nnaRg+/HO8B3LdBEtG2jWMcfsXjeo1lpK3LL6B+qUbU/l4ccPAAAAAElFTkSuQmCC",G_Blood:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEUAAABVgAAvLy8AAAAvLy/t\nEhJZp/+qwt71AAAAA3RSTlMAAAD6dsTeAAAAbElEQVR4Xn3NsQ3DMAxE0ROcAUjAAzgbGDCVAURv\nIHCC7L+DeUKUwoWvevjNQXU9c00VAj9ythXI6xhrSUbmN9ZE7czwSRuMeGaN6D9GbrLXPz/fO40P\n/HAszIw7mDkHhJkxCTtzjgKVhXWHXpXHKLQd+H5vAAAAAElFTkSuQmCC",
Wraith:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAKlBMVEX///8AAAAdFEGtra1UJlcz\nJWovLy8zJWpUJlf///+tra0vLy8dFEEAAACTgy5JAAAAB3RSTlMAAAAAAAAAVWTqWAAAALFJREFU\neF49z72NAjEUBOBHARcA8SaXbxFXwhZyMQQQk0ABtuUC1pYLWFuOnawlLAjujKcXvD9iou8FM9Kj\nGiDRki/O5Mr/wbH7h3xlZkxjYeO4BzCT6Sx7nqYFoPecmQlZCaOFrCXhhJUvberUUCcs8KBsLQan\nS3xQA7yU8v54pj39xnqZkGjTlKhhZfwhKocxq76cOyL8nSIQLolo14ZrCTeAaFuOaMfTs5v/oW8g\nbd9p0GjegR1eIwAAAABJRU5ErkJggg==",Imp:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAJ1BMVEX////tEhIAAABBDQiCHBL/\neDxBDQj///+CHBL+7gBkZGQAAADtEhIFXcd+AAAABXRSTlMAAAAAAMJrBrEAAACvSURBVHheHc4x\nisQwDAVQpU7lOs32OcKew13aDAO5wbhfBPYN9gDbxrCJvcjtDAb9Q60yv3pCXyCi8YMs40401Oyc\nk0ltTMYJue00Irup+ngo1ae68sffQal5yKMi/lxcYigSypsaRORNj2IF687eL4hcD+PaGV2Ssa0J\nAOPiC90MNV5bdN4y2fGtQnkj47kJ9B6JZpzxM+n5tdOcanQNwvZkEs4taVIa2m/NTVT1H3fGcUHg\nEYvbAAAAAElFTkSuQmCC",
Wall_crypt:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAD1BMVEU5Mi9mVlEAAAAXFBOxnJV6\nzbH5AAAAUklEQVR4XoXP0QmAMAyE4UvjAGaD4gQtN4H7L2XSBBFE/J++t+Nw3KFb1dAltTthBkhS\nnEhuwXNRg3ORE1AGlQTI4UT1SYmJ99r/hJcTrNrj0AVEQA3ic+jYKQAAAABJRU5ErkJggg==",G_Empty:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAElBMVEVVgAD///8AAAAvLy8AAAAv\nLy/6cWK8AAAABHRSTlMAAAAAs5NmmgAAAFNJREFUeF61yMEJgDAQRNFxIXc3FYjoXewgkKkgm/5b\ncSBJCf7T4wNIXTXBzqiK7wG7BdXEGOSDJIyNWORv5GLgmpsFmXM6trFZHJbZVfgO7ao0PwNcMMYM\nrj6hAAAAAElFTkSuQmCC",
G_Generic:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAGFBMVEVVgAD///8AAAAvLy9Zp/8A\nAAD+7gAvLy+6cA7+AAAABHRSTlMAAAAAs5NmmgAAAHJJREFUeF5lzkEKgzAYROFpNm4bT1AK0q14\nht/uhUguILmABK/flwZFdFaPbzWSmo2thHvnmcXhJfcJxsaVzASLvZpg35QWWGBiMAnCNaF7Gn5O\nO9L2ZBeNoeaY1e0fJrWFC3o9uvp38nJt3Fj2T8FFwR8+JDor5VwAAwAAAABJRU5ErkJggg==",G_TeleSelf:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAElBMVEUAAABVgAAvLy8AAAAjetwv\nLy/L1UYCAAAAA3RSTlMAAAD6dsTeAAAAbklEQVR4XnXOsQ3FIAwE0ENRertIn2yAZJgATxCU/VfJ\nmS/0RZGrTk+2AarHw9yqEHRj6pkgu1lpZjcr0Z184SC6B4MYA+S1FmPaUI/qoVxi8/bXZfbjWJ2v\ndWzzDxmDB0KCfyioD9ORoLKFZugLrHwocJ1Pqq0AAAAASUVORK5CYII=",
Dirt_snakepit:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUAQMAAAC3R49OAAAABlBMVEXJpFuNaSKCmV6fAAAAOElE\nQVR4XlXKoQ0AIBDF0Bo0ezANG7DJJWxynuW+QUMgORJqniltiFp4riVO05yEh98ng9yv8YQbQxYb\ngeTtnwAAAAAASUVORK5CYII=",Goat:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAG1BMVEX///+tra0AAABkZGRkZGT/\n//+tra3uNiQAAAAmRRN9AAAABHRSTlMAAAAAs5NmmgAAAHpJREFUeF5lyDEOwjAMRuEfpq7dPOYY\nHABVOQBIOUBk+QSoY4oay8fGTkFI8KZPD79NT0uO2aPSt2DUraR/KsubxMwNIPP0sfrdF44kYaoB\nHbwFuwRLUO7lYHW2hLPWa65LHxQzUTsBIMkk2r7c5kH58JKz5b3Bs6OEF+5mM1ZHL/S6AAAAAElF\nTkSuQmCC",
AniArmour:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAKlBMVEX///+tra14yTYAAAAvLy/+\n7gBkZGQvLy8AAAB4yTatra1kZGT////+7gD8sL2NAAAAB3RSTlMAAAAAAAAAVWTqWAAAALVJREFU\neF5FzTEOglAMBuAaF97q5uimm5Nn8Are5IVo8tTBQiEhTiWGWfPAWXxcgBAOAIN3seDgn6b50jQt\ngMIrAHhnabMIJdFROF+2vt3Xk4FpeHj6wUKYIVOObIRdE3RlH9ZrUFGOcYxUGFCk/RKdvhlZwLCx\nDTKA+jBV9E77BBQmiCUjBuA5Q0XL1o68OMv3Svg6ssYf9WMVZyOnZE+ZYmeF28ootSOZwgZBwiiU\nKKk0gX++zZxTzTqNAxcAAAAASUVORK5CYII=",Warlock:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAM1BMVEX///8zJWodFEGCHBIAAAD+\n7gD/eDxUJlcAAAAzJWruNiQdFEH/eDxUJlf+7gD///+CHBKWJaaRAAAACHRSTlMAAAAAAAAAALfn\nUqEAAACiSURBVHhebc3RisMwDAVR2Ul3R5Kd9v+/di8XwhbaeYijg43ie9fDgLrhRgqKf5TKaq2y\nXm8o5gPdjddaUl48n/qE51iwfkiogmQsWEGJMxvVmaJCDysz95b23vqtF3HS3VabBo44D2i7peE4\nIsacIPM9mHOGcAyaqswqmjnGjXQpHWg0soWd2cKNUdZC5UMqxAu8Ob0Q33SpcL/CM4K3Qv0BdgEL\nC2fRwuwAAAAASUVORK5CYII=",
G_Poison:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEUAAABVgAAvLy8AAAB4yTb+\n7gAvLy/ca4G5AAAAA3RSTlMAAAD6dsTeAAAAZUlEQVR4Xo3LwQmAMBBE0ZGA592LZ+0gENkGEjuw\ngizYfwlOFr2Kc/o8GKguF9dVIfDC2TpB5hLrTGLwhoWx18HwNy2ynd+5t6M+2Rr5T9p7c6RgYgY5\n5oAMDoTALs4xQSUNzdAbstYrAp6LErgAAAAASUVORK5CYII=",HeroWizard:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAM1BMVEX///8AAAAjetyrfyn+7gAA\nAAD/////0bwVN14jetzplX9Zp/+rfynuNiT+7gBQNi4uHhmiCDyzAAAABXRSTlMAAAAAAMJrBrEA\nAAChSURBVHheTc5bbgMhFARRcFJ9H4zt7H+1mRbISf1x1AjGGJwYf0Gd/ilF5tH5QR7ULj86H2Qt\n27KC93MSt95VBlwv4S0R6TKM12ujFC4keF/XxpZZUjP54Xtj0xFNG998GSei7xDTOA6ecBvJkp5P\nqSqJwIZ/7l1lrd5IsA5Si25s0auyPCQLMHZTkFICBX59AkUh4enB6cO+nnCQkwQHfwHe5gjfBmFY\ntgAAAABJRU5ErkJggg==",
Wall_snakepit:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAD1BMVEUAAABQNi4uHhl1SDqkaFX3\n1IrfAAAAZElEQVR4Xq2Pyw2AQAhEB7YB1rUAZBvYXwPG/nsS4kXvkpC8vMxhBmx+Gg+aACswBVRG\n2NodXbO6dERpqaUOx7xf61pn/iCjCgkNaGQlNfora0rCFlmyqGNRZ3uqH46GsK5fg25xDxNdDWL/\naAAAAABJRU5ErkJggg==",Dirt:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUAgMAAADw5/WeAAAACVBMVEVHRDgbDwwxLCseeGdUAAAA\nNUlEQVR4XqXLQQ0AIAxD0S5BAJIwgYlJmgCSViUs4bLzeviXl2LnsOYwlHoc6qullFLPO98LDZcW\nldn9FOwAAAAASUVORK5CYII=",Vampire:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAIVBMVEX///8AAAAdFEGtra0zJWoz\nJWqtra0dFEHuNiQAAAD///8QF2pNAAAABXRSTlMAAAAAAMJrBrEAAACPSURBVHheNc2xDYNADIVh\nU9LdlXRkhiyQJZKIDIDEAKeTM0EojxTmsUCEp8xDwF99epJlEalzkSNzDQff/js5+3hy8bXdVS9Y\nLef7jVczRqTkhdQPYKlfpUYGaRg2psXN7Es+Xz5wvpLdo6fsIhW0A9N2oyo58Q1oFEzhYGyiiDQw\nlBh3AiVUQRgpjNjj+AfgG0UYamYFbQAAAABJRU5ErkJggg==",
Altar:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAHlBMVEX////+7gAAAAD/eDwuHhmC\nHBIAAADuNiR0bWuRjX/2lC/jAAAABHRSTlMAAAAAs5NmmgAAAG9JREFUeF59yjEOwjAMRmGLIXMW\n9h4mQs2MQGLLgEx6D1T97FHAt8WJ04590zc8Oij5TY6MnOh89Y4ncnLh152fkpRRvg8pjWFprEEp\nypvUMWh9gBGN1mAIG9/A3MkjZQbyCqzGEnd+fp0nHk20R39vEj5dPRhn7QAAAABJRU5ErkJggg==",Bang:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEXuNiT/eDz////+7gD////u\nNiT/eDwE1emWAAAAA3RSTlMAAAD6dsTeAAAAdUlEQVR4Xl2M0QlCMQxFrdD//riA4ASVLvDeAPXj\nZIGS7D+CTaIIFpIeTm5y8Vej/yM/I3P/01WVXT4BBNjSnSkaYcaykZusZ9fXB8+zGyQeSVWWy+Zk\n/eixBtiwFcfKTYaKzjghBkIiFL7YrvdHJGrmAlvAGz7UHm0LdMPLAAAAAElFTkSuQmCC",
HealthPotion:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAM1BMVEX///9AgAAAAACrfymCHBIA\nAACtra1kZGT////uNiQuHhmCHBKoqKirfylQNi6wsLCvr6+3YxMcAAAABXRSTlMAAAAAAMJrBrEA\nAABoSURBVHhedc1bDsMwCETRknQGnPf+VxsHySQm7f08GsTnbyKCtYZBpMOtlnHANGFMKPBhRtUf\nSL4QStPXdy7GhFAe5tMnkrsZO4Re6NNAFK9qcQ0LbTjfOt/YemJp5uehEb7NumKZ7AS32wWY2hUH\ncAAAAABJRU5ErkJggg==",Zombie:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAJ1BMVEX///+URJoAAABUJlcVN14j\netyURJojety6acD///8VN15UJlcAAAABsOVCAAAABnRSTlMAAAAAAABupgeRAAAApklEQVR4Xl2O\nIY7DQAxFJzxkVDogUumy0MJeoJewVMU8pAcoCF60J6iKR5U8YJJILph/qHoSlewH1pP8bH33Py2w\nONd4ixJxt2G4ElF2DTAHo9/sWtuB/zRmp4NQYqgJJaFE2tyftT8l4D517tj7oPR9piQiqWIgAcqO\nQxKhdRNQJI47Ht7jePNWJ8yBH0++GJZJGcq+4ouWc4lzFYSx2LAz1Chx/gC2UVHbgwrmHgAAAABJ\nRU5ErkJggg==",
Wall_library:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAJ1BMVEUAAACkaFWrfykuHhl1SDru\nNiQjetx4yTb////+7gAVN16CHBI4YhY1RuWvAAAAiElEQVR4XnXNMQ7CIBiGYaoX0BsY3JyMGNMW\nNvlDD8BQ5yY9AeUEhHgAY8Ls5tgeoVt7KX9iBx34pmf58pKfreiyXYLZdtmGZMfvZ41k09jz4c2Q\nZ29q0PdrpDU30C0ycSs5FeXIX8hLFZR10ERCkNYgU7fTQbBhP8da7iupXRcTxVNJ/ej+ah8HSSJL\ncNiaXQAAAABJRU5ErkJggg==",Dirt_forest:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUAQMAAAC3R49OAAAABlBMVEU4YhYcMgu0UMeMAAAAPElE\nQVR4XgXAMQ2AMBQE0McFBpj+gICSIKQSOiCIERmVSjgEPgx4WXT7Om2ZhEZaNX0UT6FAcONs1IX4\nAeotBQ/1ShU6AAAAAElFTkSuQmCC",
ManaPotion:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAM1BMVEX///9AgAAAAACrfymCHBIA\nAACtra1kZGT///8jetwuHhkVN16vr69QNi6oqKiwsLCrfykKbYnxAAAABXRSTlMAAAAAAMJrBrEA\nAABqSURBVHhedc5pDoAwCIRRqQ50cbv/aUVipVb9fr5MQ4ffiAi7hkD0wEXrMSBnjB0SbNijyAcy\nvxDCUV7XeY3cIYTnaNMWmbdoU0fIiTa9EclSTapurhWLa3GstZhu8+cB6Q5TXbb50rMvHcDYBaIO\n1RRnAAAAAElFTkSuQmCC",G_Might:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAG1BMVEUAAABVgAAvLy/tEhIvLy//\n//+tra0AAABkZGT2jOCrAAAAA3RSTlMAAAD6dsTeAAAAf0lEQVR4Xm3PQQrCQAyG0b8gdJtAD6Bn\nGGT2RcgBCr2BrgcSGi8gXtukQ8WFWX08kkXAPN1iZmYQxGPsPIBOEeo+RyZeq9sFU+K6BENUS1mX\n4P2opPbUI2v5p1p/dLs/jvSnf3Pb0zJfb3fBKH3BGjongpI7Eiy/EAxgGlMb+AN6t0X4+jbVcwAA\nAABJRU5ErkJggg==",
Blood:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAIVBMVEX////tEhKVDQ1BDQj/eDzu\nNiT/eDztEhKVDQ3uNiRBDQgCVfFPAAAABnRSTlMAAAAAAABupgeRAAAAkklEQVR4Xk3NsQ6DMAwE\nUMMCI+lQ9rL0O/ozEVtRpVzC2CURe4nY2CrxlT2TpfbyJJ/OUhnOdTKmK7Tvwh4mPU72boQASmQA\nYZuU2GhkpbNKkNFHYrVP8szCk/eg2RTJ2/LFyssu1WVA4C4iVTfAc1/KRpOAEi6XXjL68q358EcO\n4yzShhbbHNkldarTsbeH/M8PE6E+rW33LH8AAAAASUVORK5CYII=",HPBoost:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEX///////8AAACtra3uNiSC\nHBJkZGS7a9PHAAAAAXRSTlMAQObYZgAAAE9JREFUeF59z7ENwCAMRNEoG1wEPRiJAcgESDAAUlgg\n+w8Ry05DYX71imvuMDpJCswM6WVGwA/gUrq6pZ9Pn0PoGlfNrU1AmW6prKQ/48MH1ZIQebrgyU8A\nAAAASUVORK5CYII=",
G_Summon:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAGFBMVEUAAABVgAAvLy9Zp/8AAAAv\nLy/+7gDtEhLtEvBNAAAAA3RSTlMAAAD6dsTeAAAAe0lEQVR4Xj3KQQrDIBSE4Qmke98i+/YMCm4L\njhcIL2fwAIJev09jOquPn4HIcdlOETgobfm9wb2GAk+jMs38wUGm6XM8TcHyZPrTe/rF6FN9WONi\nir3XcLPbFltp5amlzZrJ8SUVu3Iuf4F8UwFneUWHfNkUG8Tto34hP8OFMwx7VSjyAAAAAElFTkSu\nQmCC",Goblin:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAP1BMVEX///8AAAB4yTZTMhStra1a\n5j4cMgs4YhYAAACrfylBDQh4yTY4YhYuHhlQNi5TMhT+7gD///8cMguCHBKtra3Tr6ELAAAACHRS\nTlMAAAAAAAAAALfnUqEAAACUSURBVHhefc7bDsIgEAZhoR5mObf6/s/qXwhBE+OEcPGFLHv5Fwr3\nJY4jpXTgvZ9GlPX4xJhSPIOFEuGz85zr6Bh0L3Uk4dkBt/VUEPawc/cLOUeqtSw4iD1aa1157ZRS\nhplZQ+iGZh1EZh2vUnJRwjpQSowEC4bIKvPzJDQL1FrZ5kqUEbBNfJAz6BJtc3tWgt/4BrO7CjMg\nhzGwAAAAAElFTkSuQmCC",
Wall_industrial:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAG1BMVEUAAAA5Mi9mVlEXFBPuNiSC\nHBKxnJX/eDz///8S7R9JAAAAkUlEQVR4Xk3PMQ7DIAwFUIPUzBhLncGV2ClXSJS1A+wpQ07QoUfo\nsWu7Sz2YJ8S3BWiVaYdjPiotzAFc5AIwOQuRrVAZy3nObMQDYEGhx+tlXR9PTAA59f2z+QhALm39\nvfpQIQvH/vIh/tiNpBz6wGJjWMxj1GEZk65IemHb6M58q8ZmpaQmWWnC1kIl7X8f+gICdBkvbXjY\ndQAAAABJRU5ErkJggg==",G_TeleMonster:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEUAAABVgAAvLy8AAAAjetzt\nEhIvLy8hUyRyAAAAA3RSTlMAAAD6dsTeAAAAeElEQVR4XkWPQQ6AIAwE15h4bi+c9QcmRT4APzB+\nQBL//wS3EEJPk8luC1ANH+dVhaAaJ+0LZDOL2ewlUpZCfSBQluKayRagdnxifjrG677u3JAdNh2j\n91mctmcde3Yum5jGtYp1vOFE001CXHcpSB+nYoHK6vaE/slUKsPXHv31AAAAAElFTkSuQmCC",
HeroThief:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAJ1BMVEX///8AAABTMhTplX+rfylQ\nNi4AAABTMhQuHhn/0bz////uNiTplX8fpK3QAAAABHRSTlMAAAAAs5NmmgAAAI5JREFUeF5VyLEN\nwjAQheFL4zo09DSMwASnMAGuHZS8EHCJMgLKBJZuAUZgBFc3FBccJPj1ik+P/nNAWAlrPRO+NwS2\nlQlj4ShW+jAuzIVZJBZus2psC6NqLuya26trFjm+Mx85GMdhYJ6mZKdkf332UQI5xcmCBqow9b73\nA2qqDpgflxltTbTZwzrv6Kc3G601LDnEZLsAAAAASUVORK5CYII=",AltarWorship:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAJFBMVEX////+7gAAAAD/eDz+7gAu\nHhmCHBIAAADuNiSRjX90bWv/eDxdczcoAAAABHRSTlMAAAAAs5NmmgAAAIRJREFUeF5Fyj0KwkAU\nhdGHCGlTuIBsRUgRmHoQnVLQIk0aeWGyDht7Cb56QoS7OefXfNXhcil2pNJ+Y+vqQpXJAx2udcUN\nVe7E450fGDwNvj0W5akndD1WHdbJdTesYYVBq9JBDHyLBKYytS58i1wiOedpRewsMic+z39+XpE7\nzjW09QMbhkpT6YhRiAAAAABJRU5ErkJggg==",
PowerupGeneric:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEX///////8AAAAjetytra0V\nN15kZGTiuZuIAAAAAXRSTlMAQObYZgAAAFVJREFUeF59zzEKgDAQRFHxBmPYXoPYh8ELiBeQsBfI\n/Q9hWNaIRfzVK6aZodMYrblyg1UqF4jqhcmYyd3JFPgQjZDcGJhewmk5RfEzWE/r+DJ6nQ839JsQ\n2jYwuP8AAAAASUVORK5CYII=",Piety:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAHlBMVEX/////0byBM07+7gAAAAAV\nN17///8jetzplX9Zp//0KAgcAAAAAXRSTlMAQObYZgAAAKdJREFUeF49zMGKgzAYBOCh5gV+T/ZW\nyZK2t5Afeg6LIr0bco/gAxSDZz25x5Ye+rg1dXfn9MEMgxSN//AvMuyYD1vDpTL5VhhSgeSHZaHC\nlG/93PentGBDiSQZmaFShZykhv2jQPtNkwoFfdVwN0pndHTwD0pndI7wd5ov3Yn2K1+L5M4sPyuf\njWUWwzWiGbzNtIjNgHqMFlr4sYVwLQDUzgKVTRQV3otPJF8pjLcXAAAAAElFTkSuQmCC",
Gorgon:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAPFBMVEV4yTb///84YhYxc1g2yY0A\nAAAXLyUcMgshfFcAAAA4YhZ4yTYxc1g2yYwzJWocMgs2yY3///8XLyX+7gDDpDzOAAAACXRSTlMA\nAAAAAAAAAABzZJuhAAAAn0lEQVR4XlXOW27DMAwFUVG20w6ph53uf6+9ICoVGUI/BySgYjsyU8XK\nX0zXOJSNgKe6sxBXMyIc6sYJMkWFff6Fx48GfKOZUIU7VbhiPjwTPr7kaBGn/qPEAZd/oDgfwmWM\nEWMMFuYd0oXneXLftzTQZiSmKSBUx4WHrLUm7t2j90YVIkvNWqIMeLfVGyu0xnEc0mUvKxfY93W9\nWJnZLznUC7VdT/MyAAAAAElFTkSuQmCC",Plant:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAD1BMVEX///8AAAAcMgs4YhZ4yTYv\n6bK3AAAAAXRSTlMAQObYZgAAAH5JREFUeF5NzdERhDAIRVGwAggpwJfYAFkbIOm/pxXXGZevM4+P\nS//H+8v5znUnlm1/WOX+8RJdkgNx8On0o9s1ksnFbkGsQ2gjSwayUGwKV8kCY4khsgCcOjTJUw8E\ne9JweFRcLGWY+5KHMT53Ab1460hqb442hLhpK0Bp+gVpGBAELTMejQAAAABJRU5ErkJggg==",
Dragon:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAKlBMVEUAAACBM04AAABBDQj/c6SB\nM06VDQ3/eDz//+n//+3uNiTA/xftEhL////N0g3XAAAAAnRSTlMAAHaTzTgAAACiSURBVHheNcyx\nDcJADIZRyxMwgmXpAkimooNU4SaIAgOkuCodxTVUjMAKjMAGl6RzxUTYBD5d8fTrZABAJnvghUQ4\nNwbGloGls3kXpOD7O+NddWM/IkHYHp4PQNUCoX8dCWQ+k1HV2DUrwLYejdF5kQKo0Q+HXkimSM5q\n4GUEzDeZTsLGKg061n4G1jmrVwCrlP4sOV9NtVF47/nKusQA/Is+NSo/bc1s2o8AAAAASUVORK5C\nYII=",Bandit:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAANlBMVEX///8AAABUJlfuNiStra2U\nRJqrfykAAACrfyn+7gDuNiSURJpUJlf///+6acBTMhStra3/eDztdbCqAAAAB3RSTlMAAAAAAAAA\nVWTqWAAAAKdJREFUeF5FzVuSwzAIBVFQZqYBSXnsf7ODbjlJf9jWKRnsHYDbp3HiEfFAnxeaTGpf\nJCK7CN4IRqISQ5PZmM4kcI7e9sTc4fWC4c5zo4vCKqEj5Keno84WYV9vmwCzFY1jA2vN+32uBfrT\nqZzr08xqbI0FNOgV3LzxBr8D9gYG/B20YTaYC9bU+raWcUy1HhaC5unpF1Jka1tS+IVUZUBkFULv\n+IZ3/xdYCS6z0tdmAAAAAElFTkSuQmCC",
Dirt_crypt:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUAQMAAAC3R49OAAAABlBMVEVHRDgxLCuf8rCVAAAANElE\nQVR4Xi3AMRHAIAwAwE+m9o4hEloHSEAKUhgQzsITJDqyEFjlUu8C4fqHDWjwDPBNcABv6wMq3WpM\n6AAAAABJRU5ErkJggg==",Attackboost:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEX///////8AAACtra14yTY4\nYhZkZGSmP5qYAAAAAXRSTlMAQObYZgAAAE9JREFUeF6Nz8EJwCAMheHiBinx3qbgADqBkA4gOIH7\nD2GIgdJDSv/Td3mHtzkF0g5hAm0IT4Ao3BexPay/GfvdjMhcv2eS8ipafpMs58MEL74PW+Ju2bQA\nAAAASUVORK5CYII=",G_Petrify:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEUAAABVgAAvLy8AAABQNi7t\nEhIvLy9lricwAAAAA3RSTlMAAAD6dsTeAAAAd0lEQVR4Xl2MQQrDUAgFXwh0rZus2xsEXuIF9Aah\nF/hC7n+EWtN20dHFMIhQXc5iqEKQLOw+QW5sRmnSw4P2wMIPA8mtojut9KI1GM5o9edW28r92A9e\n1fk7iPf8f+hYFfbVxJxsbEXlJgHp3FFgZ5GYoDKzWKEv+PYrXrjVnm8AAAAASUVORK5CYII=",
Wall_forest:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEV4yTY4YhYAAAAcMgsuHhlQ\nNi6kaFU9rMSVAAAAgklEQVR4XkXI4RHCMAyDUWWDKlmAyO0Adjbg6AK9lgnYfwbcA8r360kgQ5mR\nYO3IqiVPnXbU6cPSEfhm6D9W3C7+X6FP11uJHAUl6USZQAaqVc9pzUBZozw0wHAPa80a2KT5LjlB\nxiPbmGzLehz70ZOxL8/XtlpySOuueUtyhDSi8w2kYxMgA4+cGAAAAABJRU5ErkJggg==",G_Endwall:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEUAAABVgAAvLy8AAAAvLy9Z\np/9QNi5B9POBAAAAA3RSTlMAAAD6dsTeAAAAd0lEQVR4XlXK0Q3DMAhF0RelA4CUAdoNIoEzgMkG\nViewwv4jFFD6kcfP0RVg3s5YZwbBJKbvBfSSlu5Bk/AQ/WCrGO4wOTJPUVimo0lxjEvat+jTh3vx\nXnJ63oPPh4pZ9U/Den/ojsg1A6hyRYKeMcMCpjXrDv4B0MMr1nXxo24AAAAASUVORK5CYII=",
Shop:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAHlBMVEX///8AAACkaFV1SDqkaFUu\nHhlQNi7+7gCrfykAAACiHW6IAAAAA3RSTlMAAAD6dsTeAAAAZUlEQVR4Xl3KsQmAQAxG4bR2tnbu\nkMo+bmBEB/AHJ7g5DlHItsYziPqqr3j0zqKaKkT5Q4mcHBUOIn1wY+5+NOAAVsDIdjVPZ+eI0nIx\nwQwpqBpk6AQuBFTv94kah4gr05VIS59OViNDs4YIbnEAAAAASUVORK5CYII=",G_Converter:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEUAAABVgAAvLy9Zp/8AAAAv\nLy/tEhL0dMNKAAAAA3RSTlMAAAD6dsTeAAAAdklEQVR4Xj3MwQnDMBBE0TE4d+3B96QGuYBARilA\nrDsw6r+EfJDInB5/YRVxXKxHqCjN2nNTeQDWYU62lw77O0Y93UUc41Orm5J4wxMSvUg0nhyGnrxd\n/+RuaEhczyoRNq+l9pxqb5FXVCGvWNQultoUZTd7K36blTGexCp7ZQAAAABJRU5ErkJggg==",
Dirt_library:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUAQMAAAC3R49OAAAABlBMVEVUJlc7Gz5qSsLRAAAANElE\nQVR4Xi3AMRHAIAwAwE+m9o4hEloHSEAKUhgQzsITJDqyEFjlUu8C4fqHDWjwDPBNcABv6wMq3WpM\n6AAAAABJRU5ErkJggg==",Serpent:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAIVBMVEX///9AgAAAAAAcMgs4YhZ4\nyTYAAAAcMgvuNiQ4YhaCHBJoSapXAAAABXRSTlMAAAAAAMJrBrEAAACbSURBVHhePc0xDsIwDAVQ\nw1BWsjAjhs70Bkzc4LfKViHqEqZKKPgKXKCJegHOieNK/MF++rJkKhE523ZO4KVxRBvaAfAvt9c6\nturc/OmnwkExY1JVHyAFJOXjy3y/olU+bzpqI21XHqnik/JQOPhRRN7WzhHLku12RCcS0fZUZVhy\nT6Gbi3xMFCCLJiMRa2k1Ux3MPulTZtEwX35Ykjp+zmECYQAAAABJRU5ErkJggg==",
Gold:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAIVBMVEX/////w05TMhSrfyn+7gBT\nMhT///8nFwn/w04AAACrfymq9gI9AAAABHRSTlMAAAAAs5NmmgAAAHRJREFUeF5djrENxDAIRR2l\nchfc3T6skOIWsJQBvIcTySdxEzhMGTCkMdXTE//rh+mIDBb4IJ6wDfwhHo7/nG/Hxvx9bdmJ3PYb\nsbrVoFsNWm/R4MBEEjQLoXWzRPKyX4JRFiQbpEWbLRsLYGyIzNVxlb/5HopDKVOHpowpAAAAAElF\nTkSuQmCC",EnemyGeneric:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAD1BMVEX////tEhL+7gD+7gDtEhII\npSjNAAAAA3RSTlMAAAD6dsTeAAAAWUlEQVR4Xm3K0Q2AMAiE4TZxAEnYhA4g9vafyTt4MCb+D/Sj\nYfw3zYW0k4QI0ZtJoolijnGQGt1FhhDNBeyiHq1i9+XE1u3CKQYrOkQkafpeMNHBsijfRr49xvAc\nkUOmjgwAAAAASUVORK5CYII=",
Wall:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAD1BMVEVmVlE5Mi8AAAAXFBOxnJUz\n3XO8AAAARklEQVR4XrXPSw3AMAxEwQ2DOAkBl4FlBJXKH1P9U2UCfafR3hbXFxjVAs/UMFKSnDGP\n4Hmsu62/cqslQY2cOylGrVY79AJbrA+L74lgyAAAAABJRU5ErkJggg==",G_Fireball:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAG1BMVEUAAABVgAAvLy/uNiQvLy//\neDz////+7gAAAABte51ZAAAAA3RSTlMAAAD6dsTeAAAAh0lEQVR4XjXJQQqDMBSE4RG6yDIPPEB7\nhiDNWly8vYR6Aj2BdiskLXPsxqf9Vx8zEGmHWi8CD2Wt3Bv4G62+Uk+WB9pTmT2uMbIcjGSg8cMc\nLjJ3IWZjTmOIk7FLKTxpfL3TyJPbsv45z+tkLAdjpcLpd7F/BwotBbxTXqNHGWqKBuIdazvkB9vi\nTFv2oANOAAAAAElFTkSuQmCC",
G_FirstStrike:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAHlBMVEUAAABVgAAvLy8vLy////8X\nFxetra0xMTEAAABkZGSYEegeAAAAA3RSTlMAAAD6dsTeAAAAhUlEQVR4XmXNMQ6CQBSE4SE2lPvC\nBfQKS/NOYLQ2G/cAxnADKEmQMN6A4zp5hRZO9eVvBmZdr2UzJDi15dggHRjLovMS+YSOr4c0McOD\nm/I/xx+nLzfxFlzvZFHl8zyUulaR3FlZGBzWuMPC95XKdLTOPeIM5ZgDSTmiiKXXHA0stdRm2AeZ\nyE5pdcHypgAAAABJRU5ErkJggg==",Wall2:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAflBMVEUAAAAAAgAAAAICAAACAAIh\nHyMhIyEjIyMjIx8fIyMhIx8AAgIjISEfISEjHyMjISMfHx8jIR8hISECAgAfIR8hIyMhHyEhHx8j\nIyECAgIhISMfHyMfISMfIyEjHx8fHyEhIR8jHyEfIx8/Oz09PT87Pz89Ozs9Pz87Ozs7PTuUJ7Jr\nAAABIklEQVR4XiXMh3FTURQE0L0v5/hzlmQb6L9BZqCBg9m+qMo2HZKFU84qoki0Eul46WFrnbI2\n10eMGUxwgPjKOgErAOE72M/iYsbHKTVEw74nlyr8UtseYdyotZIY3rvJoGKlXmBmKyvT6/QK7ULn\n3XsAHHwF877DM+TAx/qo9O7WPeHL8ms3mCyDks8245WOSTlS+wEp+dvJVkd+z5usA5nhBBPgXfxD\nIdhKgjPCMG11+EJWel+UyEG7GzhN0SlRy8M4W5p0vSMgVXispvde7cT8HowcCeAgBgbBPIfg//Gj\nf8T5tF+CfqeW1IY/MWHo5Y7OOaHTEuZLi5I3HFAl3KNdky1nDo2MUeDdQwgGCAYBTytnwOYKzCJL\nvOiMS7AL5vEvZFMTswerJVwAAAAASUVORK5CYII=",
GlyphSelector:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUAgMAAADw5/WeAAAACVBMVEX+7gD////+7gDEDyySAAAA\nAnRSTlMAAHaTzTgAAABTSURBVHhejc2xDcIwEADAwxKNK+b4KTICQqTJCJkiBSvQm8LS81MiZQKa\na4+oRFXR5rod+nt9DPF0Td+7y24ubCa68YeJEEj90D7a0F/ncjvH5QfVixd7HtuMOAAAAABJRU5E\nrkJggg==",Naga:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAJFBMVEX////uNiQAAACCHBKCHBL/\neDwAAACrfylBDQj+7gD////uNiTeazPWAAAABHRSTlMAAAAAs5NmmgAAAKtJREFUeF41yKGywjAQ\nheGtqS4mGkw9hidoOp2JZWtq2hIWmPhOHgDBDL4Gj8GGnYF9OUK496jv/ABwmJYAfQSNp7mk8h6v\n49fNsbqvCiiNSBgSV/bxrtdqjsw2In32ozJht1DTl87W9cJ9mQtbQyExaBSpE7mprkQ/auyGPNEc\nz381s4xsmwlibelCJvjIvUauZJu4vYo8yQ8FWESRljyPQJVGJPIdQ07/+wCO4EQNh76rjAAAAABJ\nRU5ErkJggg==",
HeroPriest:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAHlBMVEX///8AAAD/0bz/c6TplX8A\nAAD///+BM06tra3uNiRtsjzPAAAAAnRSTlMAAHaTzTgAAACPSURBVHheTc3BDYMwDIXhXHKHQxaw\nygRWxJ2aOxCePEFYoGIEVui8fUGV2v/0ybKT8FdEFwDcrF0UkYVEXbHJAPJ41wHAxjEqhBQy1STs\ny4l6kLEm45nd7Pfd5rkjAZgZGsUVwLg0Pkc9VDNpJSvjHwnlfOmo0xDSVeB6ln0O8XLPKAUr34Vz\nwXPfeMfprw8zVCjdRlM6EAAAAABJRU5ErkJggg==",G_KillProtect:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEUAAABVgAAvLy8AAABZp/8v\nLy/tEhKA6IiAAAAAA3RSTlMAAAD6dsTeAAAAfUlEQVR4XmXNsQ3DMAxE0TOM9FLhPtnAwFFegJxA\nhCfw/jvkqJS56uOBANH7cWuzdzQknRzvDe1Fhnoqk3QTf3CQCndOJK1SXFkHvjLCLaLSuOZLeT1c\nSsb1BH9ppP+nyCqH0Fyc2PP3YpwQBxlCtD2pFTaMW0ts6G0vPdG/5uYo5WQrsSUAAAAASUVORK5C\nYII="};(function(){var a="undefined"!==typeof StopIteration?StopIteration:"__break__",b=Array.prototype,d=Object.prototype,e=b.slice,g=b.unshift,h=d.toString,l=d.hasOwnProperty,p=b.forEach,n=b.map,r=b.reduce,w=b.reduceRight,x=b.filter,y=b.every,z=b.some,t=b.indexOf,A=b.lastIndexOf;d=Array.isArray;var C=Object.keys,c=function(a){return new q(a)};"undefined"!==typeof exports&&(exports._=c);window._=c;c.VERSION="1.0.4";var m=c.forEach=function(f,b,d){try{if(p&&f.forEach===p)f.forEach(b,d);else if(c.isNumber(f.length))for(var k=
0,u=f.length;k<u;k++)b.call(d,f[k],k,f);else for(k in f)l.call(f,k)&&b.call(d,f[k],k,f)}catch(B){if(B!=a)throw B;}return f};c.map=function(a,b,c){if(n&&a.map===n)return a.map(b,c);var f=[];m(a,function(a,k,d){f.push(b.call(c,a,k,d))});return f};c.reduce=function(a,b,d,e){if(r&&a.reduce===r)return a.reduce(c.bind(d,e),b);m(a,function(a,f,c){b=d.call(e,b,a,f,c)});return b};c.reduceRight=function(a,b,d,e){if(w&&a.reduceRight===w)return a.reduceRight(c.bind(d,e),b);a=c.clone(c.toArray(a)).reverse();return c.reduce(a,
b,d,e)};c.detect=function(a,b,d){var f;m(a,function(a,k,u){b.call(d,a,k,u)&&(f=a,c.breakLoop())});return f};c.filter=function(a,b,c){if(x&&a.filter===x)return a.filter(b,c);var f=[];m(a,function(a,k,d){b.call(c,a,k,d)&&f.push(a)});return f};c.reject=function(a,b,c){var f=[];m(a,function(a,k,d){!b.call(c,a,k,d)&&f.push(a)});return f};c.every=function(a,b,d){b=b||c.identity;if(y&&a.every===y)return a.every(b,d);var f=!0;m(a,function(a,k,e){(f=f&&b.call(d,a,k,e))||c.breakLoop()});return f};c.some=function(a,
b,d){b=b||c.identity;if(z&&a.some===z)return a.some(b,d);var f=!1;m(a,function(a,k,e){(f=b.call(d,a,k,e))&&c.breakLoop()});return f};c.include=function(a,b){if(t&&a.indexOf===t)return-1!=a.indexOf(b);var f=!1;m(a,function(a){(f=a===b)&&c.breakLoop()});return f};c.invoke=function(a,b){var f=c.rest(arguments,2);return c.map(a,function(a){return(b?a[b]:a).apply(a,f)})};c.pluck=function(a,b){return c.map(a,function(a){return a[b]})};c.max=function(a,b,d){if(!b&&c.isArray(a))return Math.max.apply(Math,
a);var f={computed:-Infinity};m(a,function(a,c,k){c=b?b.call(d,a,c,k):a;c>=f.computed&&(f={value:a,computed:c})});return f.value};c.min=function(a,b,d){if(!b&&c.isArray(a))return Math.min.apply(Math,a);var f={computed:Infinity};m(a,function(a,c,k){c=b?b.call(d,a,c,k):a;c<f.computed&&(f={value:a,computed:c})});return f.value};c.sortBy=function(a,b,d){return c.pluck(c.map(a,function(a,f,c){return{value:a,criteria:b.call(d,a,f,c)}}).sort(function(a,b){a=a.criteria;b=b.criteria;return a<b?-1:a>b?1:0}),
"value")};c.sortedIndex=function(a,b,d){d=d||c.identity;for(var f=0,k=a.length;f<k;){var e=f+k>>1;d(a[e])<d(b)?f=e+1:k=e}return f};c.toArray=function(a){return a?a.toArray?a.toArray():c.isArray(a)?a:c.isArguments(a)?e.call(a):c.values(a):[]};c.size=function(a){return c.toArray(a).length};c.first=function(a,b,c){return b&&!c?e.call(a,0,b):a[0]};c.rest=function(a,b,d){return e.call(a,c.isUndefined(b)||d?1:b)};c.last=function(a){return a[a.length-1]};c.compact=function(a){return c.filter(a,function(a){return!!a})};
c.flatten=function(a){return c.reduce(a,[],function(a,b){if(c.isArray(b))return a.concat(c.flatten(b));a.push(b);return a})};c.without=function(a){var b=c.rest(arguments);return c.filter(a,function(a){return!c.include(b,a)})};c.uniq=function(a,b){return c.reduce(a,[],function(a,f,d){0!=d&&(!0===b?c.last(a)==f:c.include(a,f))||a.push(f);return a})};c.intersect=function(a){var b=c.rest(arguments);return c.filter(c.uniq(a),function(a){return c.every(b,function(b){return 0<=c.indexOf(b,a)})})};c.zip=
function(){for(var a=c.toArray(arguments),b=c.max(c.pluck(a,"length")),d=Array(b),e=0;e<b;e++)d[e]=c.pluck(a,String(e));return d};c.indexOf=function(a,b){if(t&&a.indexOf===t)return a.indexOf(b);for(var f=0,c=a.length;f<c;f++)if(a[f]===b)return f;return-1};c.lastIndexOf=function(a,b){if(A&&a.lastIndexOf===A)return a.lastIndexOf(b);for(var f=a.length;f--;)if(a[f]===b)return f;return-1};c.range=function(a,b,d){var f=c.toArray(arguments),e=1>=f.length;a=e?0:f[0];b=e?f[0]:f[1];d=f[2]||1;f=Math.ceil((b-
a)/d);if(0>=f)return[];f=Array(f);e=a;for(var k=0;;e+=d){if(0<=(0<d?e-b:b-e))return f;f[k++]=e}};c.bind=function(a,b){var f=c.rest(arguments,2);return function(){return a.apply(b||{},f.concat(c.toArray(arguments)))}};c.bindAll=function(a){var b=c.rest(arguments);0==b.length&&(b=c.functions(a));m(b,function(b){a[b]=c.bind(a[b],a)});return a};c.memoize=function(a,b){var f={};b=b||c.identity;return function(){var c=b.apply(this,arguments);return c in f?f[c]:f[c]=a.apply(this,arguments)}};c.delay=function(a,
b){var f=c.rest(arguments,2);return setTimeout(function(){return a.apply(a,f)},b)};c.defer=function(a){return c.delay.apply(c,[a,1].concat(c.rest(arguments)))};c.wrap=function(a,b){return function(){var f=[a].concat(c.toArray(arguments));return b.apply(b,f)}};c.compose=function(){var a=c.toArray(arguments);return function(){for(var b=c.toArray(arguments),f=a.length-1;0<=f;f--)b=[a[f].apply(this,b)];return b[0]}};c.keys=C||function(a){if(c.isArray(a))return c.range(0,a.length);var b=[],f;for(f in a)l.call(a,
f)&&b.push(f);return b};c.values=function(a){return c.map(a,c.identity)};c.functions=function(a){return c.filter(c.keys(a),function(b){return c.isFunction(a[b])}).sort()};c.extend=function(a){m(c.rest(arguments),function(b){for(var c in b)a[c]=b[c]});return a};c.clone=function(a){return c.isArray(a)?a.slice(0):c.extend({},a)};c.tap=function(a,b){b(a);return a};c.isEqual=function(a,b){if(a===b)return!0;var d=typeof a;if(d!=typeof b)return!1;if(a==b)return!0;if(!a&&b||a&&!b)return!1;if(a.isEqual)return a.isEqual(b);
if(c.isDate(a)&&c.isDate(b))return a.getTime()===b.getTime();if(c.isNaN(a)&&c.isNaN(b))return!1;if(c.isRegExp(a)&&c.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if("object"!==d||a.length&&a.length!==b.length)return!1;d=c.keys(a);var f=c.keys(b);if(d.length!=f.length)return!1;for(var e in a)if(!(e in b&&c.isEqual(a[e],b[e])))return!1;return!0};c.isEmpty=function(a){if(c.isArray(a)||c.isString(a))return 0===a.length;for(var b in a)if(l.call(a,
b))return!1;return!0};c.isElement=function(a){return!(!a||1!=a.nodeType)};c.isArray=d||function(a){return!(!(a&&a.concat&&a.unshift)||a.callee)};c.isArguments=function(a){return a&&a.callee};c.isFunction=function(a){return!!(a&&a.constructor&&a.call&&a.apply)};c.isString=function(a){return!!(""===a||a&&a.charCodeAt&&a.substr)};c.isNumber=function(a){return a===+a||"[object Number]"===h.call(a)};c.isBoolean=function(a){return!0===a||!1===a};c.isDate=function(a){return!!(a&&a.getTimezoneOffset&&a.setUTCFullYear)};
c.isRegExp=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&!1!==a.ignoreCase)};c.isNaN=function(a){return c.isNumber(a)&&isNaN(a)};c.isNull=function(a){return null===a};c.isUndefined=function(a){return"undefined"==typeof a};c.identity=function(a){return a};c.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)};c.breakLoop=function(){throw a;};c.mixin=function(a){m(c.functions(a),function(b){D(b,c[b]=a[b])})};var E=0;c.uniqueId=function(a){var b=E++;return a?a+b:b};c.templateSettings={start:"<%",
end:"%>",interpolate:/<%=(.+?)%>/g};c.template=function(a,b){var d=c.templateSettings,e=new RegExp("'(?=[^"+d.end.substr(0,1)+"]*"+d.end.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")+")","g");a=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").replace(e,"\t").split("'").join("\\'").split("\t").join("'").replace(d.interpolate,"',$1,'").split(d.start).join("');").split(d.end).join("p.push('")+"');}return p.join('');");return b?a(b):
a};c.each=c.forEach;c.foldl=c.inject=c.reduce;c.foldr=c.reduceRight;c.select=c.filter;c.all=c.every;c.any=c.some;c.head=c.first;c.tail=c.rest;c.methods=c.functions;var q=function(a){this._wrapped=a},v=function(a,b){return b?c(a).chain():a},D=function(a,b){q.prototype[a]=function(){var a=c.toArray(arguments);g.call(a,this._wrapped);return v(b.apply(c,a),this._chain)}};c.mixin(c);m("pop push reverse shift sort splice unshift".split(" "),function(a){var c=b[a];q.prototype[a]=function(){c.apply(this._wrapped,
arguments);return v(this._wrapped,this._chain)}});m(["concat","join","slice"],function(a){var c=b[a];q.prototype[a]=function(){return v(c.apply(this._wrapped,arguments),this._chain)}});q.prototype.chain=function(){this._chain=!0;return this};q.prototype.value=function(){return this._wrapped}})();var Base=function(){};
Base.extend=function(a,b){var d=Base.prototype.extend;Base._prototyping=1;var e=new this;d.call(e,a);e.base=function(){};delete Base._prototyping;var g=e.constructor,h=e.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==h)this._constructing=!0,g.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||d).call(arguments[0],e)};h.ancestor=this;h.extend=this.extend;h.forEach=this.forEach;h.implement=this.implement;h.prototype=
e;h.toString=this.toString;h.valueOf=function(a){return"object"==a?h:g.valueOf()};d.call(h,b);"function"==typeof h.init&&h.init();return h};
Base.prototype={extend:function(a,b){if(1<arguments.length){var d=this[a];if(d&&"function"==typeof b&&(!d.valueOf||d.valueOf()!=b.valueOf())&&/\bbase\b/.test(b)){var e=b.valueOf();b=function(){var a=this.base||Base.prototype.base;this.base=d;var b=e.apply(this,arguments);this.base=a;return b};b.valueOf=function(a){return"object"==a?b:e};b.toString=Base.toString}this[a]=b}else if(a){var g=Base.prototype.extend;Base._prototyping||"function"==typeof this||(g=this.extend||g);for(var h={toSource:null},
l=["constructor","toString","valueOf"],p=Base._prototyping?0:1;n=l[p++];)a[n]!=h[n]&&g.call(this,n,a[n]);for(var n in a)h[n]||g.call(this,n,a[n])}return this}};
Base=Base.extend({constructor:function(a){this.extend(a)}},{ancestor:Object,version:"1.1",forEach:function(a,b,d){for(var e in a)void 0===this.prototype[e]&&b.call(d,a[e],e,a)},implement:function(){for(var a=0;a<arguments.length;a++)if("function"==typeof arguments[a])arguments[a](this.prototype);else this.prototype.extend(arguments[a]);return this},toString:function(){return String(this.valueOf())}});var LevelObj=Base.extend({tileName:null,constructor:function(){this.x=this.y=0},draw:function(){this.tileName&&ctx.drawImage(tiles[this.tileName],this.screenX(),this.screenY())},screenX:function(){return 20*this.x},screenY:function(){return 20*this.y},placeAt:function(a){this.x=a.x;this.y=a.y;return this}});var marV=362436069,marU=521288629;function MSeed(a){marV=a^721465829;marU=a^3133025261}function Marsaglia(){marV=36969*(marV&65535)+(marV>>16);marU=18E3*(marU&65535)+(marU>>16);return(marV<<16)+(marU&65535)}function MarsagliaF(){return Math.abs(Marsaglia()/2147483648)}function rnd(a,b){return MarsagliaF()*(b-a)+a}function irnd(a,b){if(void 0===a||void 0===b)throw"Hissy fit";return Math.floor(rnd(a,b))}function rndc(a){return arguments[irnd(0,arguments.length)]}
function log(a){var b=arguments;window.console&&window.console.log&&console.log.apply(null,b)}function spliceMatching(a,b){if(!_.isArray(a))throw"Trying to splice non-array "+a.toString()+". C'mon.";for(var d=0;d<a.length;d++)b(a[d],d)&&(a.splice(d,1),d--)}function str_repeat(a,b){for(var d=[];0<b;d[--b]=a);return d.join("")}
function sprintf(){for(var a=0,b,d=arguments[a++],e=[],g,h,l;d;){if(g=/^[^\x25]+/.exec(d))e.push(g[0]);else if(g=/^\x25{2}/.exec(d))e.push("%");else if(g=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(d)){if(null==(b=arguments[g[1]||a++])||void 0==b)throw"Too few arguments.";if(/[^s]/.test(g[7])&&"number"!=typeof b)throw"Expecting number but found "+typeof b;switch(g[7]){case "b":b=b.toString(2);break;case "c":b=String.fromCharCode(b);break;case "d":b=parseInt(b);break;
case "e":b=g[6]?b.toExponential(g[6]):b.toExponential();break;case "f":b=g[6]?parseFloat(b).toFixed(g[6]):parseFloat(b);break;case "o":b=b.toString(8);break;case "s":b=(b=String(b))&&g[6]?b.substring(0,g[6]):b;break;case "u":b=Math.abs(b);break;case "x":b=b.toString(16);break;case "X":b=b.toString(16).toUpperCase()}b=/[def]/.test(g[7])&&g[2]&&0<b?"+"+b:b;h=g[3]?"0"==g[3]?"0":g[3].charAt(1):" ";l=g[5]-String(b).length;h=g[5]?str_repeat(h,l):"";e.push(g[4]?b+h:h+b)}else throw"Huh ?!";d=d.substring(g[0].length)}return e.join("")}
;var Character=LevelObj.extend({name:"(thing)",kind:"Character",isHero:!1,constructor:function(){this.base();this.maxMana=this.mana=this.maxHealth=this.health=10;this.level=1;this.physicalResist=this.magicResist=this.manaPotions=this.healthPotions=this.xp=this.levelXp=0;this.damage=1;this.isDead=!1;this.klass=this.race=null},calculateLevelXp:function(){this.levelXp=0|15+30*Math.pow(this.level,1.3377)},levelUp:function(){this.xp>=this.levelXp&&(this.xp-=this.levelXp,this.level++,this.calculateLevelXp(),
this.damage=this.damageForLevel(this.level))},addHealth:function(a){this.health=Math.min(this.maxHealth,this.health+a)},addMana:function(a){this.mana=Math.min(this.maxMana,this.mana+a)},addXp:function(a){this.xp+=a},dealDamage:function(a,b){if("magic"==b)a*=1-this.magicResist;else if("physical"==b)a*=1-this.physicalResist;else throw"Hissy fit: Damage type "+b+" unknown.";this.health=Math.floor(Math.max(this.health-a,0));return a},draw:function(){ctx.drawImage(tiles[this.tileName],this.screenX(),this.screenY())},
drawLevelOverlay:function(a,b){setFont(12,null,null,"#000000","Arial","bold");ctx.fillText(this.level,a,b-2);ctx.fillText(this.level,a,b+2);ctx.fillText(this.level,a-2,b);ctx.fillText(this.level,a+2,b);var d=this.level-hero.level;ctx.fillStyle=1>=d?"lime":2>=d?"yellow":4>=d?"orange":"red";ctx.fillText(this.level,a,b)},rollDamage:function(){return Math.ceil(rnd(.9*this.damage,1.1*this.damage))},getDamageType:function(){return this.damageType||"physical"},healthForLevel:function(a){a+=1;a=Math.pow(rnd(9*
a,11*a),1.024);"elf"==this.race&&(a*=1.1);return a},damageForLevel:function(a){a=Math.floor(Math.pow(rnd(1+a,1+1.4*a),this.isHero?1.1:1.05));"orc"===this.race&&(a*=1.1);return a},initLevel:function(a){this.level=a;this.health=this.maxHealth=this.healthForLevel(a);this.damage=this.damageForLevel(a);this.calculateLevelXp()}}),HERO_CLASSES=["warrior","priest","thief","wizard"],HERO_RACES=["human","elf","dwarf","halfling","orc"],raceAdjs={human:"human",elf:"elven",dwarf:"dwarven",halfling:"halfling",
orc:"orcish"},Hero=Character.extend({isHero:!0,constructor:function(){this.base();var a=this.klass=rndc.apply(null,HERO_CLASSES);this.race=rndc.apply(null,HERO_RACES);this.tileName="Hero"+a.charAt(0).toUpperCase()+a.substring(1);this.nSlots="wizard"==a?5:4;this.slots=[];for(var b=0;b<this.nSlots;b++)this.slots.push({id:b+1,item:null});this.initLevel(1);this.name=this.getRaceAdj()+" "+a},draw:function(){ctx.drawImage(this.isDead?tiles.Blood:tiles[this.tileName],this.screenX(),this.screenY())},drinkHealth:function(){if(this.isDead)return addRandomMessage("You do realize that drinking this health potion would have been a great idea a couple turns ago, right?",
"Unfortunately health potions don't really work retroactively.");if(0<this.healthPotions){if(this.health>=this.maxHealth)return addRandomMessage("You really don't think you should drink this right now.","Maybe this drink should be left until later.");this.healthPotions--;this.addHealth(10);return addRandomMessage("*Gulp!* You feel much healthier. Or at least those nasty wounds closed up nicely.","*Slurp!* Mmm, tastes like strawberry and troll blood.")}return addRandomMessage("You rummage through your pack and find absolutely no health potions. Damnit!",
"You feel around a little in your pockets... No, that's not a health potion... That's not one either... Damnit, all out!")},drinkMana:function(){if(this.isDead)return addRandomMessage("As much as I understand that you need to refill your magical might to haunt on your former foes... nope, sorry. Can't do that.","The <i>Academia Arcanum</i> has expressly prohibited experiments with cadavers and mana potions.");if(0<this.manaPotions){if(this.mana>=this.maxMana)return addRandomMessage("You really don't think you need an arcane pick-me-up at this very instant.",
"Perhaps it'd be wiser to leave quaffing this until a li'l later.");this.manaPotions--;this.addMana(10);return addRandomMessage("*Gulp!* Oooohhh, mystical energy just courses through your very veins! Nice!","*Slurp!* Mmm, tastes like blueberries and electricity.")}return addRandomMessage("You rummage through your sack o'things and find absolutely nothing that'd help with this acute lack of mana. Gods be damned!","You reach into your pockets and fish around a bit. No, that's not a vial of magical strength... Nor is that thing there... Welp, none left.")},
getRaceAdj:function(){return raceAdjs[this.race]}}),Enemy=Character.extend({kind:"Enemy",draw:function(){this.base();var a=this.screenX(),b=this.screenY();ctx.lineWidth=1;ctx.fillStyle="red";ctx.fillRect(a,b+20,1,-(20*this.health/this.maxHealth));this.drawLevelOverlay(a,b+19)}}),Imp=Enemy.extend({tileName:"Imp",name:"imp"}),Warlock=Enemy.extend({tileName:"Warlock",name:"warlock",damageType:"magic"});var Doodad=LevelObj.extend({kind:"Doodad"}),BloodDoodad=Doodad.extend({tileName:"Blood"});var drawInited=!1,floorPattern,statusBarGradient,healthGradient,manaGradient,xpGradient,font='"warnock pro", palatino, "palatino linotype", georgia';function linearGradient(a,b,d,e,g,h){for(var l=ctx.createLinearGradient(a,b,d,e),p=4;p<arguments.length;p+=2)l.addColorStop(arguments[p],arguments[p+1]);return l}function setFont(a,b,d,e,g,h){ctx.font=(h?h+" ":"")+a+"px "+(g||font);ctx.textBaseline=b||"alphabetic";ctx.textAlign=d||"left";e&&(ctx.fillStyle=e)}
function initDraw(){statusDrawInited=!0;floorPattern=ctx.createPattern(tiles.Dirt,"repeat");statusBarGradient=linearGradient(0,0,0,80,0,"#433a32",.49,"#867764",.51,"#433a32",1,"#1d1916");healthGradient=linearGradient(0,0,0,70,0,"#c44d58",1,"#541D22");manaGradient=linearGradient(0,0,0,70,0,"#489FFF",1,"#252845");xpGradient=linearGradient(0,0,0,70,0,"#EC6704",1,"#582601");slotGradient=linearGradient(0,0,0,70,0,"#433527",1,"#181716")}
function drawVertBar(a,b,d,e,g,h,l,p,n,r){p&&(ctx.fillStyle=p,ctx.fillRect(a,b,d,e));ctx.fillStyle=h;g*=e;ctx.fillRect(a,b+e-g,d,g);ctx.strokeStyle=l;ctx.lineWidth=1;ctx.strokeRect(a,b,d,e);void 0!==n&&(setFont(15,null,"center","#FFF"),ctx.fillText(n.toString(),a+.5*d,b+e-5));void 0!==r&&(setFont(12,null,"center","#FFF"),ctx.fillText(r.toString(),a+.5*d,b+13))}
function drawSlot(a){ctx.fillStyle=slotGradient;ctx.fillRect(0,0,60,70);ctx.strokeStyle="#FFF";ctx.strokeRect(0,0,60,70);ctx.font="20px "+font;ctx.textBaseline="alphabetic";ctx.textAlign="left";ctx.fillStyle=a.item?"#FFF":pickupUnderHero?"#FFD":"#666";ctx.fillText(a.id,3,63)}
function drawStatus(){ctx.save();ctx.translate(0,20*level.h);ctx.fillStyle=statusBarGradient;ctx.fillRect(0,0,400,80);drawVertBar(5,5,15,70,hero.health/hero.maxHealth,healthGradient,"#c44d58","#3F0304",hero.healthPotions,"H");drawVertBar(22,5,15,70,hero.mana/hero.maxMana,manaGradient,"#489FFF","#021133",hero.manaPotions,"M");drawVertBar(39,5,15,70,hero.xp/hero.levelXp,xpGradient,"#EC6704","#200E00",hero.level);_.each(hero.slots,function(a){ctx.save();ctx.translate(65+65*(a.id-1),5);drawSlot(a);ctx.restore()});
ctx.restore()}function _drawObj(a){level.isDiscovered(a.x,a.y)&&a.draw()}function drawLevel(){ctx.fillStyle=floorPattern;ctx.fillRect(0,0,20*level.w,20*level.h);for(var a=0;a<level.h;a++)for(var b=20*a,d=0;d<level.w;d++){var e=20*d;level.isDiscovered(d,a)?(level.get(d,a)&&ctx.drawImage(tiles.Wall,e,b),ctx.fillStyle="rgba(0,0,0,0)"):ctx.fillStyle="rgb(32,32,32)";ctx.fillRect(e,b,20,20)}_.each(level.doodads,_drawObj);_.each(level.pickups,_drawObj);_.each(level.chars,_drawObj);hero.draw()}
function draw(){drawInited||initDraw();drawLevel();drawStatus()};function writeHTML(){document.body.innerHTML='<table><tr><td><canvas id="game" width="400" height="480"></canvas></td><td><div id="log"></div></td></tr></table><br /><a href="#" onclick="doubleSizeOn(); return false">Double size on...</a> <a href="#" onclick="doubleSizeOff(); return false">Double size off!</a> <a href="#" onclick="startGame(); return false">Rewind!</a> <br /><del>Beta</del> <del>Alpha</del> Pre-alpha version. Use numpad to move; H and M to use health and mana potions.<br />Inspiration <i>&amp;</i> sprites pilfered from <a href="http://www.qcfdesign.com/?cat=20">Desktop Dungeons</a>.'}
;var Level=Base.extend({constructor:function(){this.h=this.w=20;this.clear()},clear:function(){this.data={};this.discovered={};this.doodads=[];this.pickups=[];this.chars=[]},_get:function(a,b,d){return 0>d||0>b||d>this.h||b>this.w?0:this[a][(0|d)*this.w+(0|b)]||0},_set:function(a,b,d,e){0>d||0>b||d>this.h||b>this.w||(this[a][(0|d)*this.w+(0|b)]=e)},get:function(a,b){return this._get("data",a,b)},set:function(a,b,d){return this._set("data",a,b,d)},isDiscovered:function(a,b){return+this._get("discovered",
a,b)},discover:function(a,b){return 0>b||0>a||b>this.h||a>this.w?!1:this.isDiscovered(a,b)?!1:(this._set("discovered",a,b,1),!0)},generate:function(){for(var a=0;a<this.h;a++)for(var b=0;b<this.w;b++)0!=b&&0!=a&&b!=this.w-1&&a!=this.h-1||this.set(b,a,1);for(a=0;120>a;a++)this.set(rnd(0,this.w),rnd(0,this.h),1);for(a=0;6>a;a++)this.placeRandomly(this.add(new HealthPotion)),this.placeRandomly(this.add(new ManaPotion)),this.placeRandomly(this.add(new HealthBoost)),this.placeRandomly(this.add(new ManaBoost));
b=[Imp,Warlock];for(var d=1;9>d;d++){var e=Math.max(1,(9-d)/2+1);for(a=0;a<e;a++){var g=new (rndc.apply(null,b));g.initLevel(d);this.placeRandomly(this.add(g))}}},placeRandomly:function(a){var b=0;a.x=a.y=-999;do{var d=irnd(0,this.w);var e=irnd(0,this.h);b++;if(50<b)throw"Hissy fit, tries exceeded when placing an object";}while(this.get(d,e)||this.objectInTile(d,e));a.x=d;a.y=e},objectInTile:function(a,b,d){var e=function(d){return d.x==a&&d.y==b},g;if(!d||"Pickup"==d)if(g=_.detect(this.pickups,e))return g;
if(!d||"Character"==d)if(g=_.detect(this.chars,e))return g;return null},add:function(a){if("Pickup"===a.kind)return this.pickups.push(a),a;if("Enemy"===a.kind)return this.chars.push(a),a;if("Doodad"===a.kind)return this.doodads.push(a),a;throw"Unknown kind of levelobj: "+a.kind.toString();},remove:function(a){var b=function(b){return b===a};return"Pickup"===a.kind?spliceMatching(this.pickups,b):"Enemy"===a.kind?spliceMatching(this.chars,b):"Doodad"===a.kind?spliceMatching(this.doodads,b):null},setAllDiscovered:function(){for(var a=
0;a<this.h;a++)for(var b=0;b<this.w;b++)this.discover(b,a)}});var Pickup=LevelObj.extend({kind:"Pickup",canAutoPickup:!1,tileName:"",constructor:function(){this.base()},onPickup:function(a){}}),HealthPotion=Pickup.extend({canAutoPickup:!0,tileName:"HealthPotion",onPickup:function(a){a.healthPotions++;a.xp+=10;addRandomMessage("You found a healthy, delicious health potion. Now with added Vitamin D.","Ooohh! A health potion! AWESOME!","That's either a strawberry or a troll tooth floating around in that potion.")}}),ManaPotion=Pickup.extend({canAutoPickup:!0,tileName:"ManaPotion",
onPickup:function(a){a.manaPotions++;a.xp+=10;addRandomMessage("Mana mana. (Do dooh, do do doh.)","Another phial full of mhystical phower!")}}),HealthBoost=Pickup.extend({canAutoPickup:!0,tileName:"HPBoost",onPickup:function(a){a.maxHealth+=3;a.xp+=2;addRandomMessage("Whoa! You feel stronger than ever! Well... maybe not ever, but anyway!","Package full of veggies makes "+(a.klass||"thing")+" strooooong!","Your muscles grow visibly more muscular.","Your skin seems a little bit tougher. Must've been some kind of anti-cosmetic.")}}),
ManaBoost=Pickup.extend({canAutoPickup:!0,tileName:"MPBoost",onPickup:function(a){a.maxMana+=3;a.xp+=2;addRandomMessage("Oooh, that tickles!","More mana? Like you really needed that...","You feel a strange sort of tingling under your skin (and clothes, for that matter).","A cosmic magical force courses through you for a moment. Then it stops.")}});var tiles={},tilesToLoad=0,allTilesLoaded=!1;function loadTiles(){_.each(window._tileData,function(a,b){tilesToLoad++;tiles[b]=_.extend(new Image,{src:"data:image/png;base64,"+a,onload:function(){tilesToLoad--;0==tilesToLoad&&(allTilesLoaded=!0)}})});delete window._tileData};var canvas,ctx,level,hero,debug,actions={"move se":function(){return moveHero(1,1)},"move s":function(){return moveHero(0,1)},"move sw":function(){return moveHero(-1,1)},"move w":function(){return moveHero(-1,0)},action:function(){return action()},"move e":function(){return moveHero(1,0)},"move nw":function(){return moveHero(-1,-1)},"move n":function(){return moveHero(0,-1)},"move ne":function(){return moveHero(1,-1)},health:function(){hero.drinkHealth();update();draw()},mana:function(){hero.drinkMana();
update();draw()},reveal:function(){level.setAllDiscovered();update();draw()},"null":null},keymap={99:"move se",98:"move s",97:"move sw",100:"move w",101:"action",102:"move e",103:"move nw",104:"move n",105:"move ne",49:"slot 1",50:"slot 2",51:"slot 3",52:"slot 4",53:"slot 5",72:"health",77:"mana",82:"reveal",0:null};function newLevel(){level=new Level;level.generate();level.placeRandomly(hero)}
function fight(a,b){_.each(a.level>=b.level?[[a,b],[b,a]]:[[b,a],[a,b]],function(a){var b=a[0];a=a[1];if(!(0>=b.health)){var d=b.rollDamage(),h=b.getDamageType();d=a.dealDamage(d,h);b=sprintf("The %s %s the %s for <u>%d</u> %s damage!",b.name,rndc("thwonks","zaps","hits","smashes","bonks","splats"),a.name,d,h);addMessage(b)}})}
function youDie(){hero.isDead=!0;hero.health=0;addRandomMessage("Unfortunately it seems that you've run out of life.",sprintf("Whoops! There was a horrible accident involving %s and %s...",rndc("an axe","a barrage of magic","mystical forces","a sharp blade","something very nasty","a beguilingly cute little kitten"),rndc("yourself","your lovely visage","your abdomen (yes, those are your guts)")),"Aherm... you sort of kicked the bucket there. Better luck next time, eh?");addMessage('Care for another try? <a href="#" onclick="startGame();return false">Click-clickety-click!</a>')}
function moveHero(a,b){if(hero.isDead)addRandomMessage("You're dead. You can't really move around much.","You're not a ghost, you know.","Hey, it's not like I wanted you to die. <small>Well, maybe I did. A little.</small>","Um... you <i>do</i> realize you're lying there in a pool of your own intestines, don't you?");else{a=hero.x+a;var d=hero.y+b,e=level.get(a,d);(b=level.objectInTile(a,d,"Character"))?(fight(hero,b),1>b.health&&(level.add((new BloodDoodad).placeAt(b)),a=Math.ceil(18.773*(b.level+
3*(Math.max(0,b.level-hero.level)+1))),addMessage("The "+b.name+" is "+rndc("dead","vanquished","smashed into tiny bits","an icky pool on the floor","mush")+"! Hooray! The hero (that's you) gains <u>"+a+"</u> XP!"),0>=hero.health&&(addMessage("Second wind! (You almost died there...)"),hero.health=1),hero.xp+=a,level.remove(b)),update(),draw()):0==e?(hero.x=a,hero.y=d,update(),draw()):addRandomMessage("You bravely dash forth, daring the unknown dangers of the dungeon... and bump headfirst into a wall. Well played.",
"You have to be a ghost to walk through walls. It's easier to become one than you think, though...","Fighting a wall? Clever.","That's not a monster, that's a wall.",'Uh... tried casting the "remove wall" spell <i>first</i>?',"A splendid idea! ... It just doesn't work.")}}function _underHero(a){return a.x==hero.x&&a.y==hero.y}var pickupUnderHero;
function update(){pickupUnderHero=!1;if(!hero.isDead)if(1>hero.health)youDie();else{(pickupUnderHero=_.detect(level.pickups,_underHero))&&pickupUnderHero.canAutoPickup&&(pickupUnderHero.onPickup(hero),level.remove(pickupUnderHero),pickupUnderHero=null);for(var a=-1;1>=a;a++)for(var b=-1;1>=b;b++)level.discover(hero.x+a,hero.y+b)&&(hero.xp++,hero.addHealth(1),hero.addMana(.5));hero.xp>=hero.levelXp&&(hero.levelUp(),addMessage(sprintf(rndc("You feel %s stronger. Welcome to level %d!","You feel %s smarter. Welcome to level %d!",
"You feel %s prettier. Welcome to level %d!","You feel %s more awesome. Welcome to level %d!"),rndc("a little bit","somewhat","a teensy weensy bit","much","awesomely"),hero.level)+" "+sprintf("You're going to need <u>%d XP</u> to get to level %d.",hero.levelXp,hero.level+1)))}}function keyPress(a){(a=actions[keymap[a.keyCode]])&&a()}
function startGame(){var a=Math.floor(+new Date);addMessage("Game ID "+a);MSeed(a);Marsaglia();hero=new Hero;newLevel();addMessage("Welcome, brave adventurer! You are a <u>"+hero.klass+"</u> of the <u>"+hero.getRaceAdj()+"</u> persuasion. Best of luck!");update();draw()}function addRandomMessage(){addMessage(rndc.apply(null,arguments))}
function addMessage(a){var b=document.getElementById("log"),d=document.createElement("div"),e=new Date;d.innerHTML=sprintf("<small>%02d:%02d:%02d.</small> %s",e.getHours(),e.getMinutes(),e.getSeconds(),a);b.appendChild(d);b.scrollTop+=900}function doubleSizeOn(){canvas.className="doublesize";addMessage("Whoomph! Everything seems... bigger.")}function doubleSizeOff(){canvas.className="";addMessage("Where did it go?")}
function init(){writeHTML();canvas=document.getElementById("game");document.addEventListener("keyup",keyPress,!1);ctx=canvas.getContext("2d");loadTiles();addMessage('If you like, <a href="#" onclick="doubleSizeOn();return false">click here</a> to enable 2x scaling.');var a;(a=function(){allTilesLoaded?startGame():setTimeout(a,150)})()}window.init=init;
